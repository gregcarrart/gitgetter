!function($){var a,e,t=[],o="",l="",n=function(a,e){this.term=a,this.results=e},r={el:{$form:$("#search-form"),$resultsContainer:$("#results-container"),$overlayContainer:$("#overlay-container"),$searchTerm:$(".search-field"),$modalCover:$(".modal-cover")},init:function(){r.el.$form.submit(function(e){e.preventDefault(),a=r.el.$searchTerm.val().toLowerCase();var o=$.grep(t,function(e){return e.term===a});r.el.$resultsContainer.html(""),0===o.length?(t.push(new n(a,null)),r.getData(a)):r.retrieveData(a)})},getData:function(a){e="https://api.github.com/legacy/repos/search/"+a,$.ajax({type:"GET",url:e,dataType:"jsonp",success:function(e){r.setData(e,a)}})},retrieveData:function(a){for(var e=0;e<t.length;e++)if(t[e].term===a){var o=t[e].results;r.setData(o,a)}},setData:function(a,e){0===a.data.repositories.length&&r.el.$resultsContainer.append("<h2>Sorry, no results found.</h2>"),$.each(a.data.repositories,function(){var a=this.name,e=this.owner,t=this.language,l=this.followers,n=this.url,s=this.description;o='<div class="item" data-lang="'+t+'" data-followers="'+l+'" data-url="'+n+'" data-desc="'+s+'"><div class="repo-name"><span>'+a+'</span></div><div class="repo-owner"><span>'+e+"</span></div></div>",r.el.$resultsContainer.append(o)}),r.events();for(var l=0;l<t.length;l++)if(t[l].term===e){t[l].results=a;break}},events:function(){$(".item").on("click",function(){var a=$(this),e=a.find(".repo-name").find("span").html(),t=a.find(".repo-owner").find("span").html(),o=a.attr("data-lang"),l=a.attr("data-followers"),n=a.attr("data-url"),s=a.attr("data-desc");r.openModal(e,t,o,l,n,s)}),r.el.$modalCover.on("click",r.closeModal)},openModal:function(a,e,t,o,n,s){l='<div class="modal"><div class="modal-close">X</div><div class="modal-title">'+a+'</div><div class="modal-owner"><a href="http://github.com/'+e+'" target="_blank">'+e+'</a></div><hr /><div class="modal-lang modal-text">Language: '+t+'</div><div class="modal-followers modal-text">Followers: '+o+'</div><div class="modal-url modal-text">URL: <a href="'+n+'" target="_blank">'+n+'</a></div><div class="modal-desc modal-text">Description: '+s+"</div></div>",r.el.$overlayContainer.append(l),r.el.$modalCover.fadeIn(300),r.el.$overlayContainer.fadeIn(300),$(".modal-close").on("click",function(){r.closeModal()})},closeModal:function(){r.el.$modalCover.fadeOut(300),r.el.$overlayContainer.fadeOut(300),r.el.$overlayContainer.html("")}};r.init()}(jQuery);