!function($){var e,a,t=[],r="",o="";firstQuery=!0;var l=function(e,a){this.term=e,this.results=a},n={el:{$form:$("#search-form"),$resultsContainer:$("#results-container"),$overlayContainer:$("#overlay-container"),$searchTerm:$(".search-field"),$modalCover:$(".modal-cover")},init:function(){n.el.$form.submit(function(a){a.preventDefault(),e=n.el.$searchTerm.val().toLowerCase();var r=$.grep(t,function(a){return a.term===e});n.el.$resultsContainer.html(""),0===r.length?(firstQuery=!0,t.push(new l(e,null)),n.getData(e)):(firstQuery=!1,n.retrieveData(e))})},getData:function(e){a="https://api.github.com/legacy/repos/search/"+e,$.ajax({type:"GET",url:a,dataType:"jsonp",success:function(a){n.setData(a,e)}})},retrieveData:function(e){for(var a=0;a<t.length;a++)if(t[a].term===e){var r=t[a].results;n.setData(r,e)}},setData:function(e,a){if(0===e.data.repositories.length&&n.el.$resultsContainer.append("<h2>Sorry, no results found.</h2>"),$.each(e.data.repositories,function(){var e=this.name,a=this.owner,t=this.language,o=this.followers,l=this.url,s=this.description;r='<div class="item" data-lang="'+t+'" data-followers="'+o+'" data-url="'+l+'" data-desc="'+s+'"><div class="repo-name"><span>'+e+'</span></div><div class="repo-owner"><span>'+a+"</span></div></div>",n.el.$resultsContainer.append(r)}),n.events(),firstQuery)for(var o=0;o<t.length;o++)if(t[o].term===a){t[o].results=e;break}},events:function(){$(".item").on("click",function(){var e=$(this),a=e.find(".repo-name").find("span").html(),t=e.find(".repo-owner").find("span").html(),r=e.attr("data-lang"),o=e.attr("data-followers"),l=e.attr("data-url"),s=e.attr("data-desc");n.openModal(a,t,r,o,l,s)}),n.el.$modalCover.on("click",n.closeModal)},openModal:function(e,a,t,r,l,s){o='<div class="modal"><div class="modal-close">X</div><div class="modal-title">'+e+'</div><div class="modal-owner"><a href="http://github.com/'+a+'" target="_blank">'+a+'</a></div><hr /><div class="modal-lang modal-text">Language: '+t+'</div><div class="modal-followers modal-text">Followers: '+r+'</div><div class="modal-url modal-text">URL: <a href="'+l+'" target="_blank">'+l+'</a></div><div class="modal-desc modal-text">Description: '+s+"</div></div>",n.el.$overlayContainer.append(o),n.el.$modalCover.fadeIn(300),n.el.$overlayContainer.fadeIn(300),$(".modal-close").on("click",function(){n.closeModal()})},closeModal:function(){n.el.$modalCover.fadeOut(300),n.el.$overlayContainer.fadeOut(300),n.el.$overlayContainer.html("")}};n.init()}(jQuery);